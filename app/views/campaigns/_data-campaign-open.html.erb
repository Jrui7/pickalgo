<% if @validated_picks.any? %>

  <div class="table-container">
    <table>
      <tr>
        <th>Prix original</th>
        <th>Remise</th>
        <th>Prix promotionnel</th>
        <th>Quantités (U)</th>
        <th>CA</th>
        <th>Finaliser campagne</th>
      </tr>
      <% @validated_picks.each do |pick| %>
        <tr class="tr-body">
          <td><%= sprintf('%.2f', @campaign.product.price) %> €</td>
          <td><%= ((pick.price - @campaign.product.price) / (@campaign.product.price)*100).round %> %</td>
          <td><%= sprintf('%.2f', pick.price) %> €</td>
          <% qt =  @validated_picks.select { |o| o.price >= pick.price  } %>
          <td><%= qt.count %></td>
          <td><%= sprintf('%.2f', pick.price*qt.count) %> €</td>
          <td>
            <%= link_to campaign_path(@campaign.id, pick: pick.id), :method => :patch do |f| %>
              <div class="finalize-campaign-cta">Valider les commandes à <%= sprintf('%.2f', pick.price) %> €</div>
            <% end %>
          </td>
        </tr>
      <% end %>
    </table>
  </div>
<% else %>
  <p class="orders">Pas encore de commande pour votre campagne.</p>
<% end %>
